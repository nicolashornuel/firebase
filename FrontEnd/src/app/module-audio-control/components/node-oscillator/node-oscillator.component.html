<section class="col">
  <div class="row-between-center">
    <div class="row gap-2">
      <app-ui-button-grp [items]="oscillatorTypes" [icon]="true" [(selected)]="oscParam.type"></app-ui-button-grp>
      <app-ui-button-grp [items]="octaves" [icon]="false" [(selected)]="oscParam.octave"></app-ui-button-grp>
      <app-control-mute [(muted)]="oscParam.muted"></app-control-mute>
      <button class="btn-outline" (click)="oscParam.opened = !oscParam.opened">
        <mat-icon [svgIcon]="oscParam.opened ? 'view-off' : 'view-on'"></mat-icon>
      </button>
      <button class="btn-outline" [ngClass]="oscParam.eg ? 'active' : ''" (click)="oscParam.eg = !oscParam.eg">
        {{ oscParam.eg ? 'EG' : 'Amp' }}
      </button>
    </div>
    <div class="row-between-center gap-2">
      <app-control-pot name="detune" min="0" max="500" step="10" [(value)]="oscParam.detune"></app-control-pot>
      <span class="divider"></span>
      <app-control-pot
        *ngIf="oscillatorGain"
        name="volume"
        min="0"
        max="1"
        step="0.1"
        [(value)]="oscillatorGain.gain.value"
      ></app-control-pot>
    </div>
  </div>

  <div class="accordeon row-between-start gap-2" [ngClass]="oscParam.opened ? 'opened' : 'closed'">
    <app-control-gamme [sequence]="oscParam.sequence"></app-control-gamme>

    <div class="col">
      <app-control-pot name="amp" min="0.1" max="16" step="0.1" [(value)]="oscParam.amp"></app-control-pot>
    </div>

    <app-control-env [(envParam)]="oscParam.envParam"></app-control-env>
      <fieldset>
        <legend>filter</legend>
        <div class="row-evenly-center gap-2 pb-1">
          <app-control-pot name="modulation" min="1" max="1000" step="10" [(value)]="oscParam.modulation" (valueChange)="setModulation$()"></app-control-pot>
          <app-control-pot name="frequency" min="1" max="1000" step="10" [(value)]="oscParam.filter.frequency"></app-control-pot>
          <app-control-pot name="resonance" min="1" max="80" step="1" [(value)]="oscParam.filter.q"></app-control-pot>
        </div>
      </fieldset>
  </div>
</section>
